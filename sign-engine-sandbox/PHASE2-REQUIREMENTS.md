# Phase 2: å®Œæ•´çš„æ¾³å¤§åˆ©äºšæŒ‡å—ç‰Œè§„èŒƒå®ç°

## ğŸ“‹ éœ€æ±‚æ¸…å•

### 1. âœ… G1-1 æ”¹ä¸ºä¸¤å—æ¿å †å 
- å½“å‰ï¼šå•å—æ¿ï¼Œä¸¤è¡Œæ–‡å­—
- ç›®æ ‡ï¼šä¸¤å—ç‹¬ç«‹çš„æ¿å‚ç›´å †å 
- æ¯å—æ¿æ˜¯ä¸€ä¸ªå®Œæ•´çš„æŒ‡å—ç‰Œå•å…ƒ

### 2. âœ… ç§»é™¤ distance å‚æ•°
- G1-1 å’Œ G1-2 éƒ½ä¸éœ€è¦ distanceKm
- åªä¿ç•™ destination æ–‡å­—

### 3. âœ… å¢åŠ  Road Nameï¼ˆç™½åº•é»‘å­—ï¼‰
- ä½ç½®ï¼šåœ¨ destination ä¸Šæ–¹
- æ ·å¼ï¼šç™½è‰²èƒŒæ™¯ï¼Œé»‘è‰²æ–‡å­—ï¼Œåœ†è§’çŸ©å½¢
- å¯¹é½ï¼šå±…ä¸­
- å¯é€‰ï¼šå¯ä»¥ä¸æ˜¾ç¤º

### 4. âœ… å¢åŠ å‘å‰ç®­å¤´
- å½“å‰ï¼šåªæœ‰å·¦å³ç®­å¤´
- æ–°å¢ï¼šå‘å‰ç®­å¤´ï¼ˆâ†‘ï¼‰
- 3ç§æ–¹å‘ï¼šforward, left, right

### 5. âœ… å¢åŠ é»„è‰² Road Number
- æ ·å¼ï¼šé»„è‰²èƒŒæ™¯ï¼Œé»‘è‰²æ–‡å­—
- ä¸ Shield äºŒé€‰ä¸€
- æ˜¾ç¤ºé€»è¾‘ï¼š`roadNumberType: 'number' | 'shield' | 'none'`

### 6. âœ… æ–¹å‘é€»è¾‘é‡æ„
**å½“å‰é—®é¢˜**ï¼š
- A éƒ¨åˆ†åªèƒ½é€‰ç®­å¤´å›¾æ ‡
- B éƒ¨åˆ†ç»Ÿä¸€è®¾ç½®æ–¹å‘
- æ¯ä¸ª panel æ²¡æœ‰ç‹¬ç«‹çš„æ–¹å‘æ§åˆ¶

**ç›®æ ‡**ï¼š
- æ¯ä¸ª panel æœ‰ç‹¬ç«‹çš„ `direction` å‚æ•°ï¼š`'forward' | 'left' | 'right'`
- direction æ§åˆ¶ï¼š
  1. ç®­å¤´æ–¹å‘
  2. å…ƒç´ æ’åˆ—é¡ºåº
  3. å¯¹é½æ–¹å¼

**æ’åˆ—è§„åˆ™**ï¼š
```
direction = 'forward' æˆ– 'left':
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  [Road Name (ç™½åº•)]     â”‚
  â”‚  â† [M1] Destination    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  æ’åˆ—ï¼šArrow - RoadNumber - Destinations

direction = 'right':
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  [Road Name (ç™½åº•)]     â”‚
  â”‚  Destination [A85] â†’   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  æ’åˆ—ï¼šDestinations - RoadNumber - Arrow
```

### 7. âœ… å¯¹é½é€»è¾‘ï¼ˆAlignmentï¼‰
**è§„åˆ™**ï¼š
- **Dominant Row**ï¼ˆæ¨ªå‘æœ€é•¿çš„è¡Œï¼‰ï¼šä¿æŒæ ‡å‡† spacing
- **Non-dominant Rows**ï¼šåˆ†ç»„å¯¹é½
  - **Left align** (forward/left æ–¹å‘)ï¼š
    - Group 1: Arrow + RoadNumberï¼ˆç´§è´´ï¼Œå°é—´è·ï¼‰
    - Group 2: Destinationsï¼ˆå·¦å¯¹é½åˆ° boardï¼‰
  - **Right align** (right æ–¹å‘)ï¼š
    - Group 1: Destinationsï¼ˆå³å¯¹é½åˆ° boardï¼‰
    - Group 2: RoadNumber + Arrowï¼ˆç´§è´´ï¼Œå°é—´è·ï¼‰

### 8. âœ… æ”¯æŒå¤šä¸ª Destinations
- æ¯ä¸ª panel å¯ä»¥æœ‰ 1-3 ä¸ª destinations
- å‚ç›´å †å ï¼Œå±…ä¸­æˆ–å·¦/å³å¯¹é½
- ç»Ÿä¸€å­—ä½“å¤§å°

---

## ğŸ—ï¸ æ•°æ®ç»“æ„è®¾è®¡

### Panel Input ç»“æ„
```javascript
{
  // Road Name (å¯é€‰)
  roadName: 'SALTASH HWY',  // ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºä¸æ˜¾ç¤º
  
  // Road Number (äºŒé€‰ä¸€)
  roadNumberType: 'number' | 'shield' | 'none',
  roadNumber: 'A85',        // é»„è‰²èƒŒæ™¯ï¼Œé»‘å­—
  shieldLabel: 'M1',        // ç›¾å½¢å†…çš„æ–‡å­—
  
  // Destinations (1-3ä¸ª)
  destinations: [
    'Plumpton',
    'Hawker',     // å¯é€‰
    'Liverpool',  // å¯é€‰
  ],
  
  // æ–¹å‘ï¼ˆæ§åˆ¶å¸ƒå±€å’Œæ’åˆ—ï¼‰
  direction: 'forward' | 'left' | 'right',
}
```

### State ç»“æ„
```javascript
state = {
  signType: 'G1-1',  // 'G1-1' | 'G1-2'
  
  content: {
    panels: [
      {
        roadName: 'SALTASH HWY',
        roadNumberType: 'shield',
        shieldLabel: 'M1',
        destinations: ['Plumpton'],
        direction: 'left',
      },
      {
        roadName: '',
        roadNumberType: 'number',
        roadNumber: 'A85',
        destinations: ['Hawker', 'Liverpool'],
        direction: 'right',
      },
      // G1-2 æœ‰ç¬¬ä¸‰ä¸ª panel
    ],
  },
  
  template: {
    letter_height_h: 8,
    line_spacing_h: 0.75,
    group_spacing_h: 1.0,
    board_pad_h: 1.0,
    panel_spacing_h: 0.3,
    
    // Road Name æ ·å¼
    roadName_letter_height_h: 6,
    roadName_bg_color: '#ffffff',
    roadName_text_color: '#000000',
    roadName_pad_h: 0.5,
    
    // Road Number æ ·å¼
    roadNumber_letter_height_h: 7,
    roadNumber_bg_color: '#ffd700',
    roadNumber_text_color: '#000000',
    roadNumber_pad_h: 0.3,
  },
  
  // ... å…¶ä»–ä¿æŒä¸å˜
}
```

---

## ğŸ”§ å®æ–½æ­¥éª¤

### Step 1: æ›´æ–°æ•°æ®ç»“æ„
- [ ] ä¿®æ”¹ `state.content.panels[]` ç»“æ„
- [ ] ç§»é™¤ `distanceKm`
- [ ] æ·»åŠ  `roadName`, `roadNumberType`, `roadNumber`, `destinations[]`, `direction`

### Step 2: å¢å¼º D2/converter.js
- [ ] æ·»åŠ  `toBoxRoadName()` - ç™½åº•é»‘å­—çŸ©å½¢
- [ ] æ·»åŠ  `toBoxRoadNumber()` - é»„åº•é»‘å­—çŸ©å½¢
- [ ] æ›´æ–° `toBoxIcon()` æ”¯æŒå‘å‰ç®­å¤´

### Step 3: é‡æ„ D3/layout-g11.js
- [ ] å®ç°å•ä¸ª panel çš„å®Œæ•´å¸ƒå±€é€»è¾‘
- [ ] æ”¯æŒ roadNameï¼ˆé¡¶éƒ¨å±…ä¸­ï¼‰
- [ ] æ”¯æŒå¤šä¸ª destinationsï¼ˆ1-3ä¸ªï¼‰
- [ ] å®ç°æ–¹å‘æ§åˆ¶çš„æ’åˆ—é€»è¾‘
- [ ] å®ç°å¯¹é½é€»è¾‘ï¼ˆdominant row vs grouped alignï¼‰

### Step 4: æ›´æ–° D3/layout-g12.js
- [ ] å¤ç”¨ layout-g11 çš„å• panel é€»è¾‘
- [ ] å †å  3 ä¸ª panels

### Step 5: æ›´æ–° UI (app.js + index.html)
- [ ] é‡æ–°è®¾è®¡è¾“å…¥è¡¨å•
- [ ] æ¯ä¸ª panel ç‹¬ç«‹çš„æ–¹å‘é€‰æ‹©
- [ ] Road Name è¾“å…¥æ¡†
- [ ] Road Number Type é€‰æ‹©ï¼ˆnumber/shield/noneï¼‰
- [ ] Destinations æ•°é‡é€‰æ‹©ï¼ˆ1-3ä¸ªï¼‰
- [ ] ç§»é™¤ç»Ÿä¸€çš„ç®­å¤´æ–¹å‘è®¾ç½®

### Step 6: æµ‹è¯•
- [ ] æµ‹è¯•å„ç§æ–¹å‘ç»„åˆ
- [ ] æµ‹è¯•å¯¹é½é€»è¾‘
- [ ] æµ‹è¯•å¤šä¸ª destinations
- [ ] å¯¹æ¯”æˆªå›¾éªŒè¯æ­£ç¡®æ€§

---

## ğŸ¨ è§†è§‰æ•ˆæœç¤ºä¾‹

### Forward æ–¹å‘ç¤ºä¾‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    â”Œâ”€ SALTASH HWY â”€â”        â”‚  â† Road Name (ç™½åº•é»‘å­—)
â”‚    â”‚                â”‚        â”‚
â”‚    â†‘  M1  Sydney            â”‚  â† Arrow - Shield - Destination
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Left æ–¹å‘ç¤ºä¾‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              â”‚
â”‚    â†  A85  Plumpton         â”‚  â† Arrow - RoadNumber - Destination
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Right æ–¹å‘ç¤ºä¾‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    â”Œâ”€ SALTASH HWY â”€â”        â”‚  â† Road Name (ç™½åº•é»‘å­—)
â”‚    â”‚                â”‚        â”‚
â”‚    Hawker  A85  â†’           â”‚  â† Destination - RoadNumber - Arrow
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ æŠ€æœ¯éš¾ç‚¹

1. **å¯¹é½é€»è¾‘**ï¼šéœ€è¦å…ˆè®¡ç®—æ‰€æœ‰è¡Œçš„å®½åº¦ï¼Œæ‰¾å‡º dominant rowï¼Œç„¶åå¯¹å…¶ä»–è¡Œåº”ç”¨åˆ†ç»„å¯¹é½
2. **æ–¹å‘æ§åˆ¶**ï¼šéœ€è¦åœ¨å¸ƒå±€é˜¶æ®µæ ¹æ® direction åŠ¨æ€è°ƒæ•´å…ƒç´ é¡ºåº
3. **å¤š destinations**ï¼šéœ€è¦å‚ç›´å †å ï¼Œå¹¶æ ¹æ®å¯¹é½è§„åˆ™è°ƒæ•´ä½ç½®
4. **Road Name æ ·å¼**ï¼šç™½åº•é»‘å­—ï¼Œéœ€è¦ç‰¹æ®Šæ¸²æŸ“é€»è¾‘

---

## ğŸ“… é¢„è®¡å·¥ä½œé‡

- **Step 1-2**: 1å°æ—¶ï¼ˆæ•°æ®ç»“æ„ + D2å¢å¼ºï¼‰
- **Step 3**: 2-3å°æ—¶ï¼ˆæ ¸å¿ƒå¸ƒå±€é€»è¾‘é‡æ„ï¼‰
- **Step 4**: 30åˆ†é’Ÿï¼ˆå¤ç”¨é€»è¾‘ï¼‰
- **Step 5**: 1-2å°æ—¶ï¼ˆUIé‡æ„ï¼‰
- **Step 6**: 1å°æ—¶ï¼ˆæµ‹è¯•è°ƒè¯•ï¼‰

**æ€»è®¡**: 5-8å°æ—¶

---

**å‡†å¤‡å¥½å¼€å§‹å®æ–½äº†å—ï¼Ÿ** ğŸš€



