<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Engine Sandbox - Interactive Playground</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app-container">
    <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
    <aside class="control-panel">
      <div class="panel-header">
        <h1>ğŸ›ï¸ æ§åˆ¶é¢æ¿</h1>
        <button id="btn-reset" class="btn-icon" title="é‡ç½®ä¸ºé»˜è®¤">â†º</button>
      </div>

      <div class="panel-scroll">
        <!-- Sign Type é€‰æ‹© -->
        <details class="control-group" open>
          <summary>ğŸ“‹ Sign Type</summary>
          <div class="control-items">
            <label>
              <span>ç±»å‹</span>
              <select id="sign-type">
                <option value="G1-1">G1-1 (ä¸¤å—é¢æ¿)</option>
                <option value="G1-2">G1-2 (ä¸‰å—é¢æ¿)</option>
              </select>
            </label>
          </div>
        </details>

        <!-- Panel 1 -->
        <details class="control-group" id="panel-1-section" open>
          <summary>ğŸ“ Panel 1</summary>
          <div class="control-items">
            <label>
              <span>Road Name (ç™½åº•é»‘å­—)</span>
              <input type="text" id="panel1-roadname" placeholder="SALTASH HWY" />
            </label>
            
            <label>
              <span>Road Number Type</span>
              <select id="panel1-road-type">
                <option value="none">æ— </option>
                <option value="number">Road Number (é»„å­—)</option>
                <option value="shield">Shield</option>
              </select>
            </label>
            
            <label>
              <span>Road Number (é»„å­—)</span>
              <input type="text" id="panel1-roadnumber" placeholder="A85" />
            </label>
            
            <label>
              <span>Shield Label</span>
              <input type="text" id="panel1-shieldlabel" placeholder="M1" />
            </label>
            
            <label>
              <span>Destination 1</span>
              <input type="text" id="panel1-dest1" placeholder="Plumpton" />
            </label>
            
            <label>
              <span>Destination 2 (å¯é€‰)</span>
              <input type="text" id="panel1-dest2" placeholder="" />
            </label>
            
            <label>
              <span>Destination 3 (å¯é€‰)</span>
              <input type="text" id="panel1-dest3" placeholder="" />
            </label>
            
            <label>
              <span>æ–¹å‘</span>
              <select id="panel1-direction">
                <option value="forward">å‘å‰ â†‘</option>
                <option value="left">å‘å·¦ â†</option>
                <option value="right">å‘å³ â†’</option>
              </select>
            </label>
            
            <label>
              <span>Destinations ç»„å¯¹é½</span>
              <select id="panel1-align-center">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
            
            <label>
              <span>Road Number å¯¹é½</span>
              <select id="panel1-align-roadnum">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
            
            <label>
              <span>Arrow å¯¹é½</span>
              <select id="panel1-align-arrow">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
          </div>
        </details>

        <!-- Panel 2 -->
        <details class="control-group" id="panel-2-section" open>
          <summary>ğŸ“ Panel 2</summary>
          <div class="control-items">
            <label>
              <span>Road Name (ç™½åº•é»‘å­—)</span>
              <input type="text" id="panel2-roadname" placeholder="" />
            </label>
            
            <label>
              <span>Road Number Type</span>
              <select id="panel2-road-type">
                <option value="none">æ— </option>
                <option value="number">Road Number (é»„å­—)</option>
                <option value="shield">Shield</option>
              </select>
            </label>
            
            <label>
              <span>Road Number (é»„å­—)</span>
              <input type="text" id="panel2-roadnumber" placeholder="A85" />
            </label>
            
            <label>
              <span>Shield Label</span>
              <input type="text" id="panel2-shieldlabel" placeholder="M1" />
            </label>
            
            <label>
              <span>Destination 1</span>
              <input type="text" id="panel2-dest1" placeholder="Hawker" />
            </label>
            
            <label>
              <span>Destination 2 (å¯é€‰)</span>
              <input type="text" id="panel2-dest2" placeholder="" />
            </label>
            
            <label>
              <span>Destination 3 (å¯é€‰)</span>
              <input type="text" id="panel2-dest3" placeholder="" />
            </label>
            
            <label>
              <span>æ–¹å‘</span>
              <select id="panel2-direction">
                <option value="forward">å‘å‰ â†‘</option>
                <option value="left">å‘å·¦ â†</option>
                <option value="right">å‘å³ â†’</option>
              </select>
            </label>
            
            <label>
              <span>Destinations ç»„å¯¹é½</span>
              <select id="panel2-align-center">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
            
            <label>
              <span>Road Number å¯¹é½</span>
              <select id="panel2-align-roadnum">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
            
            <label>
              <span>Arrow å¯¹é½</span>
              <select id="panel2-align-arrow">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
          </div>
        </details>

        <!-- Panel 3 -->
        <details class="control-group" id="panel-3-section" style="display:none;">
          <summary>ğŸ“ Panel 3</summary>
          <div class="control-items">
            <label>
              <span>Road Name (ç™½åº•é»‘å­—)</span>
              <input type="text" id="panel3-roadname" placeholder="" />
            </label>
            
            <label>
              <span>Road Number Type</span>
              <select id="panel3-road-type">
                <option value="none">æ— </option>
                <option value="number">Road Number (é»„å­—)</option>
                <option value="shield">Shield</option>
              </select>
            </label>
            
            <label>
              <span>Road Number (é»„å­—)</span>
              <input type="text" id="panel3-roadnumber" placeholder="A30" />
            </label>
            
            <label>
              <span>Shield Label</span>
              <input type="text" id="panel3-shieldlabel" placeholder="M2" />
            </label>
            
            <label>
              <span>Destination 1</span>
              <input type="text" id="panel3-dest1" placeholder="Sydney" />
            </label>
            
            <label>
              <span>Destination 2 (å¯é€‰)</span>
              <input type="text" id="panel3-dest2" placeholder="" />
            </label>
            
            <label>
              <span>Destination 3 (å¯é€‰)</span>
              <input type="text" id="panel3-dest3" placeholder="" />
            </label>
            
            <label>
              <span>æ–¹å‘</span>
              <select id="panel3-direction">
                <option value="forward">å‘å‰ â†‘</option>
                <option value="left">å‘å·¦ â†</option>
                <option value="right">å‘å³ â†’</option>
              </select>
            </label>
            
            <label>
              <span>Destinations ç»„å¯¹é½</span>
              <select id="panel3-align-center">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
            
            <label>
              <span>Road Number å¯¹é½</span>
              <select id="panel3-align-roadnum">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
            
            <label>
              <span>Arrow å¯¹é½</span>
              <select id="panel3-align-arrow">
                <option value="">é»˜è®¤ï¼ˆè·Ÿéšæ–¹å‘ï¼‰</option>
                <option value="left">å¼ºåˆ¶å·¦å¯¹é½</option>
                <option value="right">å¼ºåˆ¶å³å¯¹é½</option>
              </select>
            </label>
          </div>
        </details>

        <!-- B. æ¨¡æ¿å‚æ•° -->
        <details class="control-group" open>
          <summary>B. æ¨¡æ¿å‚æ•° (Template / D3)</summary>
          <div class="control-items">
            <label>
              <span>å­—æ¯é«˜åº¦ (h)</span>
              <input type="number" id="tmpl-letter-height" value="8" step="0.25" min="4" max="16" />
            </label>
            <label>
              <span>è¡Œé—´è· (h)</span>
              <input type="number" id="tmpl-line-spacing" value="0.75" step="0.25" min="0" max="4" />
            </label>
            <label>
              <span>ç»„é—´è· (h)</span>
              <input type="number" id="tmpl-group-spacing" value="1.0" step="0.25" min="0" max="8" />
            </label>
            <label>
              <span>æ¿è¾¹è· (h)</span>
              <input type="number" id="tmpl-board-pad" value="1.0" step="0.25" min="0" max="4" />
            </label>
            <label id="panel-spacing-row" style="display:none;">
              <span>é¢æ¿é—´è· (h)</span>
              <input type="number" id="tmpl-panel-spacing" value="0.3" step="0.1" min="0" max="2" />
            </label>
            <label>
              <span>åœ†è§’ (h)</span>
              <input type="number" id="tmpl-corner-radius" value="0.5" step="0.1" min="0" max="2" />
            </label>
            <label>
              <span>è¾¹æ¡†å®½åº¦ (h)</span>
              <input type="number" id="tmpl-border" value="0.2" step="0.05" min="0" max="1" />
            </label>
            <label>
              <span>ç®­å¤´ä½ç½®</span>
              <select id="tmpl-arrow-placement">
                <option value="right">å³ä¾§</option>
                <option value="left">å·¦ä¾§</option>
                <option value="none">æ— </option>
              </select>
            </label>
            <label>
              <span>ç›¾å½¢ä½ç½®</span>
              <select id="tmpl-shield-placement">
                <option value="left">å·¦ä¾§</option>
                <option value="none">æ— </option>
              </select>
            </label>
            <label>
              <span>å¯¹é½ç­–ç•¥</span>
              <select id="tmpl-group-align">
                <option value="middle">middle</option>
                <option value="baseline-first">baseline-first</option>
                <option value="baseline-last">baseline-last</option>
              </select>
            </label>
          </div>
        </details>

        <!-- C. å­—ä½“åº¦é‡ -->
        <details class="control-group">
          <summary>C. å­—ä½“åº¦é‡ (Fonts / D2)</summary>
          <div class="control-items">
            <label>
              <span>å­—ä½“ç³»åˆ—</span>
              <select id="font-series">
                <option value="E">E</option>
              </select>
            </label>
            <label>
              <span>å¹³å‡å­—å®½æ¯”ä¾‹</span>
              <input type="range" id="font-char-width" min="0.3" max="1.0" step="0.05" value="0.6" />
              <output id="font-char-width-val">0.6</output>
            </label>
            <label>
              <span>Ascent æ¯”ä¾‹</span>
              <input type="range" id="font-ascent" min="0.5" max="1.0" step="0.05" value="0.75" />
              <output id="font-ascent-val">0.75</output>
            </label>
            <label>
              <span>Descent æ¯”ä¾‹</span>
              <input type="range" id="font-descent" min="0.0" max="0.5" step="0.05" value="0.25" />
              <output id="font-descent-val">0.25</output>
            </label>
          </div>
        </details>

        <!-- D. å›¾æ ‡/ç›¾å½¢åº¦é‡ -->
        <details class="control-group">
          <summary>D. å›¾æ ‡/ç›¾å½¢åº¦é‡ (Icons / D2)</summary>
          <div class="control-items">
            <h4>ç®­å¤´</h4>
            <label>
              <span>ç¼©æ”¾ç­–ç•¥</span>
              <select id="arrow-scale-policy">
                <option value="match_text_line">match_text_line</option>
                <option value="fixed_k_h">fixed_k_h</option>
              </select>
            </label>
            <label>
              <span>å›ºå®šé«˜åº¦ç³»æ•° (k)</span>
              <input type="number" id="arrow-k" value="8" step="0.5" min="4" max="16" disabled />
            </label>
            <h4>ç›¾å½¢</h4>
            <label>
              <span>ç¼©æ”¾ç­–ç•¥</span>
              <select id="shield-scale-policy">
                <option value="match_text_line">match_text_line</option>
                <option value="fixed_k_h">fixed_k_h</option>
              </select>
            </label>
            <label>
              <span>å›ºå®šé«˜åº¦ç³»æ•° (k)</span>
              <input type="number" id="shield-k" value="10" step="0.5" min="4" max="20" disabled />
            </label>
            <label>
              <span>åŸºçº¿é”šç‚¹</span>
              <select id="icon-baseline-anchor">
                <option value="middle">middle</option>
                <option value="baselineOffset">baselineOffset</option>
              </select>
            </label>
            <label>
              <span>åŸºçº¿åç§» (h)</span>
              <input type="number" id="icon-baseline-offset" value="0" step="0.5" min="-4" max="4" disabled />
            </label>
          </div>
        </details>

        <!-- E. å¼•æ“ä¸å•ä½ -->
        <details class="control-group" open>
          <summary>E. å¼•æ“ä¸å•ä½ (Engine / D1)</summary>
          <div class="control-items">
            <label>
              <span>px/h æ¯”ä¾‹</span>
              <input type="range" id="engine-px-per-h" min="5" max="20" step="1" value="10" />
              <output id="engine-px-per-h-val">10</output>
            </label>
            <label>
              <span>åƒç´ å¯¹é½æ¨¡å¼</span>
              <select id="engine-snap-mode">
                <option value="half-pixel">half-pixel (0.5)</option>
                <option value="round">round (æ•´æ•°)</option>
                <option value="none">none (ä¸å¯¹é½)</option>
              </select>
            </label>
            <label>
              <span>æ–‡å­—é”šç‚¹</span>
              <select id="engine-text-anchor">
                <option value="useBaseline">useBaseline</option>
                <option value="boxTopAscent">boxTopAscent</option>
              </select>
            </label>
          </div>
        </details>

        <!-- F. è¯æ®ä¸å åŠ  -->
        <details class="control-group" open>
          <summary>F. è¯æ®ä¸å åŠ  (Evidence)</summary>
          <div class="control-items">
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-content-bbox" checked />
              <span>å†…å®¹åŒ…ç»œæ¡†</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-board" checked />
              <span>æ¿é¢å¤–æ¡†</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-boxes" />
              <span>å…ƒç´ ç›’æ¡†</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-baselines" checked />
              <span>æ–‡æœ¬åŸºçº¿</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-midline" checked />
              <span>ç»„ä¸­çº¿</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-grid" />
              <span>åƒç´ ç½‘æ ¼</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-spacing" checked />
              <span>é—´è·æ ‡æ³¨</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="show-metrics" checked />
              <span>æ˜¾ç¤ºæ•°å€¼é¢æ¿</span>
            </label>
          </div>
        </details>

        <!-- G. åœºæ™¯ä¸å‹åŠ›æµ‹è¯• -->
        <details class="control-group">
          <summary>G. åœºæ™¯æµ‹è¯• (Convenience)</summary>
          <div class="control-items">
            <button class="btn-full" id="btn-long-text">é•¿æ–‡æœ¬</button>
            <button class="btn-full" id="btn-short-text">çŸ­æ–‡æœ¬</button>
            <button class="btn-full" id="btn-extreme-small">æå°å‚æ•°</button>
            <button class="btn-full" id="btn-extreme-large">æå¤§å‚æ•°</button>
            <hr />
            <button class="btn-full btn-primary" id="btn-export-svg">ğŸ“¥ ä¸‹è½½ SVG</button>
            <button class="btn-full" id="btn-copy-svg">ğŸ“‹ å¤åˆ¶ SVG æºç </button>
            <button class="btn-full" id="btn-copy-config">ğŸ“‹ å¤åˆ¶é…ç½® JSON</button>
            <label class="btn-full btn-secondary">
              ğŸ“‚ åŠ è½½é…ç½® JSON
              <input type="file" id="file-load-config" accept=".json" style="display:none" />
            </label>
          </div>
        </details>
      </div>
    </aside>

    <!-- å³ä¾§é¢„è§ˆåŒº -->
    <main class="preview-area">
      <div class="preview-header">
        <h2>ğŸ–¼ï¸ å®æ—¶é¢„è§ˆ</h2>
        <div class="preview-controls">
          <button id="btn-zoom-out" class="btn-icon" title="ç¼©å°">âˆ’</button>
          <span id="zoom-level">100%</span>
          <button id="btn-zoom-in" class="btn-icon" title="æ”¾å¤§">+</button>
          <button id="btn-zoom-reset" class="btn-icon" title="é‡ç½®ç¼©æ”¾">âŠ™</button>
        </div>
      </div>

      <div class="preview-stage" id="preview-stage">
        <!-- SVG å°†å†…è”æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
      </div>

      <!-- æ•°å€¼é¢æ¿ -->
      <aside class="metrics-panel" id="metrics-panel">
        <div class="metrics-header">
          <h3>ğŸ“Š æ•°å€¼é¢æ¿</h3>
          <button id="btn-toggle-metrics" class="btn-icon">âˆ’</button>
        </div>
        <div class="metrics-content" id="metrics-content">
          <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
      </aside>
    </main>
  </div>

  <!-- åŠ è½½å¼•æ“æ¨¡å— -->
  <script type="module" src="app.js"></script>
</body>
</html>

